<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Giphy API</title>
</head>
<body>
    <h1>Giphy API Assignment</h1>

    <div id="animal-buttons">
        <button data-animal="shark">Shark</button>
        <button data-animal="tiger">Tiger</button>
        <button data-animal="lion">Lion</button>
    </div>
    <br>
    <br>
    <form id="search-animal"></form>
        <label for="animal-input">Your next animal.</label>
        <input type="text" id="animal-input">
        <button id="find-animal" type="submit">Search Animal</button>
    <br>
    <div id="gif-appears-here"></div>

    <!-- jQuery/js for query pull  -->
    <script
  src="https://code.jquery.com/jquery-3.4.1.js"
  integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
  crossorigin="anonymous"></script>
  <script type="text/javascript">

$("button").on("click", function(){
    let searchItem = $(this).attr("data-animal");
    console.log(searchItem);

    let queryURL = "http://api.giphy.com/v1/gifs/search?q=" + searchItem + "&api_key=u3Z362gdKjh0GIuAno1BUrOM2LlS5jQx&limit=11";
    console.log(queryURL);

    $.ajax({
        url: queryURL,
        method: "GET",
    }).then(function(results) {

        var response = results.data;
        console.log(response);

        for (var i = 0; i < response.length; i++) {

        console.log(response[i].rating);

        var animalDiv = $("<div>");

        var p = $("<p>" + response[i].rating + "</p>");

        var image = $("<img>");

        image.attr("src", response[i].images.fixed_height_still.url);

        image.on("click", function(){
                console.log("firing");
                var state = $(this).attr("data-state");

                if (state === "still") {
                    $(this).attr("src", $(this).attr("data-animate"));
                    $(this).att("data/state", "animate");
                }

                else {
                    $(this).attr("src", $(this).attr("data-still"));
                    $(this).attr("data-state", "still");
                }

            })

        animalDiv.append(p);
        animalDiv.append(image);

        $("#gif-appears-here").prepend(animalDiv);
        }
    



    });
});
        


  </script>
    
</body>
</html>